<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Game Pixel Art Survey - potapenko.dev</title>
  <link rel="icon" type="image/png" href="/favicons2/favicon-48x48.png" sizes="48x48" />
  <link rel="icon" type="image/svg+xml" href="/favicons2/favicon.svg" />
  <link rel="shortcut icon" href="/favicons2/favicon.ico" />
  <link rel="apple-touch-icon" sizes="180x180" href="/favicons2/apple-touch-icon.png" />
  <link rel="manifest" href="/favicons2/site.webmanifest" />
  <link rel="stylesheet" href="style.css">
  <script src="script.js" defer></script>
  <script src="https://cdn.jsdelivr.net/npm/@emailjs/browser@4/dist/email.min.js"></script>
  <style>
    /* Survey specific styles extending your existing theme */
    .survey-container {
      margin-top: 120px;
      padding: 2rem;
      min-height: calc(100vh - 200px);
    }

    .survey-title {
      color: rgb(228, 228, 228);
      font-family: Calibri;
      margin: 1;
      padding: 1;
      font-size: 2.5rem;
      text-shadow: 
       -2px -2px 0 rgb(23, 39, 39), 
        2px -2px 0 rgb(23, 39, 39),
       -2px 2px 0 rgb(23, 39, 39), 
        2px 2px 0 rgb(23, 39, 39);
      text-align: center;
      margin-bottom: 2rem;
    }

    /* Hierarchical folder structure */
    .folder-section {
      margin-bottom: 1rem;
    }

    .folder-header {
      color: rgb(228, 228, 228);
      font-family: Calibri;
      margin: 0.5rem 0;
      padding: 0.5rem;
      background: rgba(0, 0, 0, 0.5);
      border-radius: 10px;
      cursor: pointer;
      transition: all 0.3s ease;
      position: relative;
    }

    .folder-header:hover {
      background: rgba(0, 123, 255, 0.2);
      transform: translateX(10px);
    }

    /* Bullet point system */
    .bullet-point {
      position: relative;
      padding-left: 1.5rem;
    }

    .bullet-point::before {
      content: "‚óè";
      color: #007bff;
      position: absolute;
      left: 0;
      top: 0;
      font-size: 1.2em;
    }

    /* Hierarchical headings */
    h1.folder-header {
      font-size: 2rem;
      padding-left: 0.5rem;
    }

    h2.folder-header {
      font-size: 1.7rem;
      padding-left: 2rem;
    }

    h3.folder-header {
      font-size: 1.4rem;
      padding-left: 4rem;
    }

    h4.folder-header {
      font-size: 1.2rem;
      padding-left: 6rem;
    }

    /* Image grid layout */
    .images-grid {
      display: grid;
      grid-template-columns: repeat(auto-fill, minmax(450px, 1fr));
      gap: 2rem;
      margin: 1rem 0;
      padding-left: 2rem;
    }

    /* Image survey cards with light gray transparent background */
    .image-survey-card {
      background: rgba(128, 128, 128, 0.5); /* Light gray 50% transparent */
      border-radius: 15px;
      padding: 1rem;
      border: 2px solid transparent;
      transition: transform 0.3s ease;
      display: flex;
      flex-direction: row;
      gap: 1rem;
    }

    /* Rainbow border from your styles */
    .image-survey-card {
      animation: borderColorChange 5s infinite;
      animation-fill-mode: forwards;
      border: 2px solid;
    }

    .image-survey-card:hover {
      transform: scale(1.02);
    }

    .image-container {
      flex: 0 0 200px;
    }

    .image-survey-card img {
      width: 200px;
      height: 200px;
      object-fit: contain;
      border-radius: 10px;
      background: rgba(255, 255, 255, 0.1);
    }

    .image-filename {
      color: white;
      font-family: Calibri;
      font-size: 0.9rem;
      margin-top: 0.5rem;
      word-break: break-word;
      text-align: center;
    }

    /* Survey controls on the right side */
    .survey-controls {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
      justify-content: flex-start;
      padding-top: 1rem;
    }

    .checkbox-row {
      display: flex;
      align-items: center;
      gap: 0.5rem;
      margin-bottom: 0.5rem;
    }

    .checkbox-row input[type="checkbox"] {
      width: 18px;
      height: 18px;
      accent-color: #007bff;
    }

    .checkbox-row label {
      color: white;
      font-family: Calibri;
      font-size: 0.9rem;
    }

    /* Text inputs with black transparent background and rounded edges */
    .text-input {
      background: rgba(0, 0, 0, 0.7);
      border: 1px solid #555;
      border-radius: 8px;
      padding: 0.5rem;
      color: white;
      font-family: Calibri;
      font-size: 0.9rem;
      margin-bottom: 0.5rem;
      transition: border-color 0.3s ease;
    }

    .text-input:focus {
      outline: none;
      border-color: #007bff;
      box-shadow: 0 0 5px rgba(0, 123, 255, 0.3);
    }

    .text-input::placeholder {
      color: #aaa;
    }

    /* Name textbox - one line, 20 characters */
    .name-input {
      height: 2rem;
      width: 100%;
      max-width: 300px;
    }

    /* Description textbox - same width, 40 words max */
    .description-input {
      height: 4rem;
      width: 100%;
      max-width: 300px;
      resize: vertical;
      max-height: 8rem;
    }

    /* Fixed submit button with rainbow styling */
    .submit-button {
      position: fixed;
      bottom: 2rem;
      right: 2rem;
      font-size: 18px;
      padding: 12px 24px;
      border: 2px solid;
      border-radius: 18px;
      background: transparent;
      cursor: pointer;
      font-family: Calibri;
      animation: rainbowText 5s linear infinite, rainbowBorder 5s linear infinite;
      text-decoration: none;
      transition: background 0.3s ease-in-out, transform 0.3s ease-in-out, color 0.3s ease-in-out, box-shadow 0.3s ease-in-out;
      color: rgba(255, 255, 255, 0.718);
      z-index: 1000;
    }

    .submit-button:hover {
      background: linear-gradient(45deg, #1118537c, #29687c86);
      transform: scale(1.1);
      color: white;
      box-shadow: 0 0 20px rgba(0, 123, 255, 0.3);
    }

    /* Collapsible content */
    .collapsible-content {
      display: none;
      animation: fadeIn 0.3s ease-in-out;
    }

    .collapsible-content.show {
      display: block;
    }

    @keyframes fadeIn {
      from { opacity: 0; }
      to { opacity: 1; }
    }

    /* Mobile responsiveness */
    @media (max-width: 768px) {
      .images-grid {
        grid-template-columns: 1fr;
        padding-left: 1rem;
      }
      
      .survey-container {
        padding: 1rem;
        margin-top: 80px;
      }
      
      .submit-button {
        bottom: 1rem;
        right: 1rem;
        font-size: 16px;
        padding: 10px 20px;
      }

      .image-survey-card {
        flex-direction: column;
      }

      .image-container {
        flex: none;
        align-self: center;
      }
    }
  </style>
</head>

<body>
  <header class="title colorful-border">
    <div>
      <a href="/" class="titlelink">Home</a>
      <a href="/page2.html" class="titlelink">About Me</a>
      <a href="/projects.html" class="titlelink">Projects</a>
      <a href="/contactpage.html" class="titlelink">Contact Info</a>
    </div>
  </header>

  <div class="menu-container">
    <button class="menu-button" aria-label="Open menu"></button>
    <div class="menu-content">
      <a href="/contactpage.html">Contact Me</a>
      <a href="/index.html">Home Page</a>
      <a href="/page2.html">About Me</a>
      <a href="/projects.html">Projects</a>
      <a href="/resume.html">Resume</a>
      <a href="/page3.html">Secret Project</a>
    </div>
  </div>

  <main class="survey-container">
    <h1 class="survey-title">Game Pixel Art Survey</h1>
    
    <div id="survey-content">
      <!-- Content will be dynamically generated by JavaScript -->
    </div>
  </main>

  <button class="submit-button" onclick="submitSurvey()">Submit Survey</button>

  <footer class="footer">
    <button class="icon-button" id="btnGit" aria-label="Go to GitHub">
      <img src="images/github logo.png" alt="GitHub Icon">
    </button>
    <button class="icon-button" id="btnLink" aria-label="Go to LinkedIn">
      <img src="images/linkedin.png" alt="LinkedIn Icon">
    </button>
    <button class="icon-button" id="btnMozaic" aria-label="Go to MyMozaic">
      <img src="images/mymozaic.png" alt="MyMozaic Icon">
    </button>
    <button class="icon-button" id="btnCodePen" aria-label="Go to CodePen">
      <img src="images/codepen-min.png" alt="CodePen Icon">
    </button>
    <script>
      document.getElementById("btnGit").addEventListener("click", function() {
        window.location.href = "https://github.com/JosephPotapenko";
      });
      document.getElementById("btnLink").addEventListener("click", function() {
        window.location.href = "https://www.linkedin.com/in/joseph-potapenko-1788a7316/";
      });
      document.getElementById("btnMozaic").addEventListener("click", function() {
        window.location.href = "https://www.mymozaic.com/josephpotapenko";
      });
      document.getElementById("btnCodePen").addEventListener("click", function() {
        window.location.href = "https://codepen.io/JosephPotapenko";
      });
    </script>
  </footer>

  <script>
    // Image database - organized by folder structure
    const imageDatabase = {
      "Game pixel art": {
        images: ["Untitled-cleaned.png"],
        subfolders: {
          "Armor": {
            images: [],
            subfolders: {
              "Body armor - armor": {
                images: [
                  "1740640300970-removebg-preview.png",
                  "1740640679583-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_12-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_17-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_3-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_7-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_8-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__1__2-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__1__5-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__11-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__12-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__13-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__2-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__21-removebg-preview-cleaned.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__3-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__6-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__8-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__8-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc._in_ancient_Israelite_style.png__1__4-removebg-preview.png",
                  "Leather armor.png",
                  "outlined-image (11).png",
                  "outlined-image (2).png",
                  "outlined-image (3).png",
                  "outlined-image (6).png",
                  "women's gold armor.png"
                ]
              },
              "helmets - armor": {
                images: [
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_13-removebg-preview-cleaned.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_14-removebg-preview (1).png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_15-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_16-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_18-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_19-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__1__8-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__1__9-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__2__4-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__2-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__3-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__4-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__5-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__6-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png__3__7-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc._in_ancient_Israelite_style.png__1__2-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc._in_ancient_Israelite_style.png__1__3-removebg-preview.png",
                  "Golden helm.png",
                  "Philistine Helm.png",
                  "soldier's gold helmet.png"
                ]
              },
              "shields - armor": {
                images: [
                  "1740044691909-removebg-preview.png",
                  "1740044700568-removebg-preview.png",
                  "1740102860965-removebg-preview.png",
                  "1740103205801-removebg-preview.png",
                  "1740104230242-removebg-preview.png",
                  "1740106704928-removebg-preview.png",
                  "1740106789051-removebg-preview.png",
                  "1740106803164-removebg-preview.png",
                  "1740106817066-removebg-preview.png",
                  "1740106830940-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_10-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_11-removebg-preview.png",
                  "32_by_32_pixel_art_of_different_armor_pieces_in_leather__copper__bronze__iron__etc.__in_an_ancient_Israelite_style.png_9-removebg-preview.png",
                  "32_by_32_pixel_art_of_shaul__a_rod__a_staff__a_horn__a_coat_of_many_colors__a_torch__a_flaming_sword__a_candleabra__and_different_armor_pieces_in_leather__copper__bronze__iron__etc._in_ancient_Israeli (1).png",
                  "Gold rimmed shield.png",
                  "King's shield.png",
                  "Spear man's shield.png",
                  "asset_1 (45)-cleaned.png",
                  "quality wooden shield.png"
                ]
              }
            }
          },
          "clothing": {
            images: [
              "Green cloak.png",
              "outlined-image (10).png",
              "outlined-image (7).png",
              "outlined-image (8).png",
              "outlined-image (9).png",
              "Red cloak.png"
            ]
          },
          "Collectibles": {
            images: [],
            subfolders: {
              "Ancient Artifacts and Teasures": {
                images: [],
                subfolders: {
                  "assorted": {
                    images: [
                      "1740104286089-removebg-preview-cleaned.png",
                      "1740104886409-removebg-preview.png",
                      "1740105313697-removebg-preview.png",
                      "1740107414582-removebg-preview.png",
                      "Ancient_Bracelet.png",
                      "Ancient_Fish_Hook.png",
                      "Ancient_Flying_Toy.png",
                      "Ancient_Necklace.png",
                      "Broken_Blade.png",
                      "Broken_Bracelet.png",
                      "Crescent earrings.png",
                      "Golden_Tag.png",
                      "Scroll.png",
                      "Shattered_Blade.png",
                      "Spoon.png",
                      "asset_10 (1)-cleaned.png",
                      "asset_10 (3)-cleaned.png",
                      "asset_10 (5)-cleaned.png",
                      "asset_4 (22).png",
                      "asset_5 (14).png",
                      "asset_5 (19)-cleaned.png",
                      "asset_5 (21)-cleaned.png",
                      "asset_6 (17)-cleaned.png",
                      "asset_6 (32).png",
                      "asset_6 (36).png",
                      "asset_7 (10)-cleaned.png",
                      "asset_7 (11)-cleaned.png",
                      "asset_7 (2)-cleaned.png",
                      "asset_8 (7)-cleaned.png",
                      "asset_9 (10).png",
                      "clay pitcher.png",
                      "peacock clay model.png",
                      "rotated_image (4).png"
                    ]
                  },
                  "Assyrian": {
                    images: [
                      "1740104313426-removebg-preview-cleaned.png",
                      "1740104709778-removebg-preview.png",
                      "1740104773338-removebg-preview.png",
                      "1740104865757-removebg-preview.png",
                      "1740105607503-removebg-preview.png",
                      "1740106298405-removebg-preview.png",
                      "1740640648263-removebg-preview.png",
                      "32_by_32_pixel_art_style_images_of_baskets_of_scrolls__tablets_with_engravings__pots__and_other_similar_ancient_Israelite_artifacts_in_an_inventory_style_arrangement.png_10_1_-removebg-preview.png",
                      "Assyrian_Art.png",
                      "Assyrian_Pot.png",
                      "Assyrian_stone_Marker.png",
                      "Assyrin_Fish_God_Statue.png",
                      "Asyrian decorative piece.png",
                      "Female_Face_Sculpture_from_Persia.png",
                      "Golden_Chain_of_Assyrian_King.png",
                      "Greek stone eagle model.png",
                      "Man_s_Clay_sculpture_of_Babel.png",
                      "Philistine shield.png",
                      "Philistine_Portable_Time_Dial.png",
                      "Philistine_Pot.png",
                      "Philistine_Tent_Spoke.png",
                      "Plain_Assyrian_Bracelet.png",
                      "Stone_Assyrian_Fish_God_Carving.png",
                      "asset_1 (44)-cleaned.png",
                      "asset_1 (62).png",
                      "asset_3 (32).png",
                      "asset_6 (14)-cleaned.png",
                      "asset_6 (31).png",
                      "asset_7 (10).png",
                      "asset_7 (20).png",
                      "asset_9 (17).png",
                      "asset_9 (9).png",
                      "cut_0_centered.png"
                    ]
                  },
                  "Canaanitish": {
                    images: [
                      "1740044417630-removebg-preview.png",
                      "1740044479573-removebg-preview.png",
                      "1740044491281-removebg-preview.png",
                      "1740044525251-removebg-preview.png",
                      "1740044551480-removebg-preview.png",
                      "1740044579475-removebg-preview.png",
                      "1740044889351-removebg-preview.png",
                      "1740104630988-removebg-preview.png",
                      "1740104735077-removebg-preview.png",
                      "1740104823874-removebg-preview.png",
                      "1740105103587-removebg-preview.png",
                      "1740105247510-removebg-preview.png",
                      "1740105267129-removebg-preview.png",
                      "1740105726617-removebg-preview.png",
                      "1740105763601-removebg-preview.png",
                      "1740105858778-removebg-preview.png",
                      "1740106176368-removebg-preview.png",
                      "1740106580772-removebg-preview.png",
                      "1740106691475-removebg-preview.png",
                      "1740644541419-removebg-preview.png",
                      "Assyrian_Coin.png",
                      "Canaanite 1.png",
                      "Canaanite 3.png",
                      "Canaanite urn.png",
                      "Clay_Elephant_Sculpture.png",
                      "Decorative_Assyrian_Challace.png",
                      "Gilded_horn-removebg-preview.png",
                      "Gold Jewish Decorative plate.png",
                      "Head_of_Baal.png",
                      "Wooden Shield.png",
                      "asset_1 (58).png",
                      "asset_2 (52).png",
                      "asset_2 (56).png",
                      "asset_4 (15).png",
                      "asset_4 (19).png",
                      "asset_4 (29)-cleaned.png",
                      "asset_4 (30)-cleaned.png",
                      "asset_5 (12)-cleaned.png",
                      "asset_5 (16).png",
                      "asset_5-cleaned (3).png",
                      "asset_6 (15)-cleaned.png",
                      "asset_6 (34).png",
                      "asset_6 (35).png",
                      "asset_7 (12).png",
                      "asset_7 (9)-cleaned.png",
                      "asset_9 (5)-cleaned.png",
                      "asset_9 (8)-cleaned.png",
                      "asset_9-cleaned.png",
                      "canaanite 2.png"
                    ]
                  },
                  "Egyptian": {
                    images: [
                      "1740044341262-removebg-preview.png",
                      "1740044371540-removebg-preview.png",
                      "1740102913876-removebg-preview.png",
                      "1740102952498-removebg-preview.png",
                      "1740103172722-removebg-preview.png",
                      "1740103313584-removebg-preview.png",
                      "1740104269696-removebg-preview.png",
                      "1740104329697-removebg-preview-cleaned.png",
                      "1740104364648-removebg-preview-cleaned.png",
                      "1740105378325-removebg-preview.png",
                      "1740105503367-removebg-preview.png",
                      "1740105529196-removebg-preview.png",
                      "1740105557383-removebg-preview.png",
                      "1740106644251-removebg-preview.png",
                      "1740106731199-removebg-preview.png"
                    ]
                  },
                  "Israeli": { images: [] },
                  "tablets": { images: [] }
                }
              }
            }
          },
          "Equipables": {
            images: [
              "asset_14-cleaned_centered.png",
              "Fishing rod (2).png",
              "rotated_image (10).png",
              "rotated_image (11).png",
              "rotated_image (14).png",
              "rotated_image (15).png",
              "rotated_image (16).png",
              "rotated_image (17).png",
              "rotated_image (18).png",
              "rotated_image (19).png",
              "rotated_image (20).png"
            ]
          },
          "food decor": { images: [] },
          "Foods": {
            images: [],
            subfolders: {
              "drinks": {
                images: [
                  "Barley_Brew.png",
                  "Herbal_Elixir.png",
                  "Herbal_tea.png",
                  "Medicinal_Tartar.png"
                ]
              },
              "Farming products": {
                images: [
                  "Butter.png",
                  "Cheese.png",
                  "Eggs.png",
                  "Goat_Butter.png",
                  "Goat_Cheese.png"
                ]
              },
              "fish": {
                images: [
                  "1743751207158-removebg-preview.png",
                  "1743751212957-removebg-preview.png",
                  "1743751215881-removebg-preview.png",
                  "1743751219014-removebg-preview.png",
                  "32_by_32_pixel_art_inventory-style_items_including_shells__crabs__shrimp__squid__flounders__fish__octopuses__ores__armor__and_vegetables.png_2-removebg-preview.png",
                  "32_by_32_pixel_art_inventory-style_items_including_shells__crabs__shrimp__squid__flounders__fish__octopuses__ores__armor__and_vegetables.png_3-removebg-preview.png",
                  "32_by_32_pixel_art_inventory-style_items_with_high_quality__inspired_by_Stardew_Valley_fish.png_2-removebg-preview (2).png",
                  "32_by_32_pixel_art_inventory-style_items_with_high_quality__inspired_by_Stardew_Valley_fish.png_3-removebg-preview.png",
                  "32_by_32_pixel_art_inventory-style_items_with_high_quality__inspired_by_Stardew_Valley_fish.png_4-removebg-preview.png"
                ]
              }
            }
          },
          "footwear": {
            images: [],
            subfolders: {
              "foot bindings": {
                images: [
                  "Canaanite foot bindings.png",
                  "asset_3 (24)-cleaned.png",
                  "foot bindings .png"
                ]
              },
              "sandals": {
                images: [
                  "Israeli sandals.png",
                  "king's sandals.png",
                  "merchant's sandals.png",
                  "worn sandals.png"
                ]
              }
            }
          },
          "furniture": {
            images: [
              "1740044812891-removebg-preview.png",
              "1740105001187-removebg-preview - Copy-cleaned.png",
              "asset_2 (53).png"
            ],
            subfolders: {
              "bookcase": {
                images: [
                  "Book case 1.png",
                  "Book case 2.png",
                  "Book case 3.png",
                  "Book case 4.png"
                ]
              },
              "cabinets": {
                images: [
                  "1740045048779-removebg-preview.png",
                  "1740106001654-removebg-preview.png",
                  "asset_2 (12).png",
                  "asset_3 (39)-cleaned.png",
                  "cabinet 1.png",
                  "cabinet 2.png"
                ]
              },
              "chairs": {
                images: [
                  "Wicker Chair.png"
                ]
              },
              "chests": {
                images: [
                  "1740105977993-removebg-preview.png",
                  "1740105988407-removebg-preview.png",
                  "asset_1 (63).png"
                ]
              },
              "decorations": {
                images: [],
                subfolders: {
                  "On Floor": {
                    images: [
                      "1740044952828-removebg-preview.png",
                      "1740045074729-removebg-preview.png",
                      "1740045112478-removebg-preview.png",
                      "1740102716072-removebg-preview.png",
                      "32_by_32_pixel_art_style_images_of_baskets_of_scrolls__tablets_with_engravings__pots__and_other_similar_ancient_Israelite_artifacts_in_an_inventory_style_arrangement.png_12_1_-removebg-preview.png",
                      "32_by_32_pixel_art_style_images_of_baskets_of_scrolls__tablets_with_engravings__pots__and_other_similar_ancient_Israelite_artifacts_in_an_inventory_style_arrangement.png_5_1_-removebg-preview.png",
                      "32_by_32_pixel_art_style_images_of_baskets_of_scrolls__tablets_with_engravings__pots__and_other_similar_ancient_Israelite_artifacts_in_an_inventory_style_arrangement.png__1__8-removebg-preview.png",
                      "Bushel_of_Grain.png",
                      "Cranberry_Basket.png",
                      "Gorbonzo_Beans.png",
                      "Kidney_Bean_Bushel.png",
                      "Pinto_Beans.png",
                      "Unchaffed_Grain.png",
                      "decorative pillows.png",
                      "kings trash can.png",
                      "outlined-image.png"
                    ]
                  },
                  "On Table": {
                    images: [
                      "1740042600640-removebg-preview.png",
                      "1740043832146-removebg-preview.png",
                      "1740044901381-removebg-preview.png",
                      "1740044964435-removebg-preview.png",
                      "1740045061001-removebg-preview.png",
                      "1740105669738-removebg-preview.png",
                      "1740105871974-removebg-preview.png",
                      "1740105919281-removebg-preview.png",
                      "32_by_32_pixel_art_of_ancient_Israelite_dishes_in_an_inventory_style.png__2__18-removebg-preview.png",
                      "32_by_32_pixel_art_of_ancient_Israelite_dishes_in_an_inventory_style.png__2__28-removebg-preview.png",
                      "32_by_32_pixel_art_of_ancient_Israelite_dishes_in_an_inventory_style.png__2__29-removebg-preview (1).png",
                      "32_by_32_pixel_art_style_images_of_ancient_Israelite_furniture_including_baskets__tables__chairs__shelves__pots__and_other_similar_items_in_an_inventory_style_arrangement.png_4-removebg-preview.png",
                      "Basket of things.png",
                      "Cup.png",
                      "Hebrew_Oil_Jar.png",
                      "Ink_well.png",
                      "Lamp_oil_jar.png",
                      "Pitcher_of_Water.png",
                      "Pot.png",
                      "asset_1 (40).png",
                      "asset_10 (1).png",
                      "asset_2 (14).png",
                      "asset_2 (36).png",
                      "asset_3 (28).png",
                      "asset_3 (31).png",
                      "asset_4 (10).png",
                      "asset_4-cleaned (2).png",
                      "asset_5 (11).png",
                      "asset_6 (10).png",
                      "asset_6 (12).png",
                      "asset_8 (10).png",
                      "asset_9 (8).png",
                      "jar of cranberries.png",
                      "outlined-image (1).png"
                    ]
                  },
                  "On Wall": {
                    images: [
                      "Feather_Decor.png",
                      "Incense Burner.png",
                      "asset_3 (37)-cleaned.png",
                      "asset_4 (16).png",
                      "asset_7 (11).png",
                      "asset_8 (10)-cleaned.png",
                      "asset_9 (6)-cleaned.png"
                    ]
                  }
                }
              },
              "stalls": {
                images: [
                  "asset_1 (20).png",
                  "asset_1 (21).png",
                  "asset_1 (22).png",
                  "asset_1 (23).png",
                  "asset_1 (24).png",
                  "asset_1 (32).png",
                  "asset_1 (33).png",
                  "asset_1 (34).png",
                  "asset_1 (44).png"
                ]
              },
              "tabernacle": {
                images: [
                  "asset_1 (41).png",
                  "asset_5 (19).png",
                  "asset_6 (15).png",
                  "asset_6 (22).png",
                  "asset_8 (6).png"
                ]
              },
              "tables": {
                images: [
                  "1740106964571-removebg-preview.png",
                  "Study table 1.png",
                  "asset_8 (3).png"
                ]
              }
            }
          },
          "gems or jewelry": {
            images: [],
            subfolders: {
              "gems": {
                images: [
                  "32_by_32_pixel_art_style_inventory_of_jewels__gems__and_ancient_artifacts.png_3-removebg-preview.png",
                  "Amazonite.png",
                  "Amber.png",
                  "Amethyst.png",
                  "Aquamarine.png",
                  "Emerald.png",
                  "Onyx.png",
                  "Ruby.png",
                  "Sapphire.png",
                  "Topaz.png",
                  "Zircon.png"
                ]
              },
              "jewelry": {
                images: [
                  "Princess' hair peice.png"
                ],
                subfolders: {
                  "Bracelets": {
                    images: [
                      "antler bracelet.png",
                      "asset_1 (25).png",
                      "asset_1 (26).png",
                      "asset_2 (21).png",
                      "asset_2 (22).png",
                      "asset_2 (23).png",
                      "asset_2 (45)-cleaned.png",
                      "asset_3 (19).png",
                      "asset_3 (20).png",
                      "asset_4 (25).png",
                      "asset_4 (26).png",
                      "asset_4 (27).png",
                      "asset_5 (23).png",
                      "asset_6 (26).png",
                      "asset_7 (16).png",
                      "asset_7 (17).png",
                      "asset_7 (18).png",
                      "common bracelet.png",
                      "feather bracelet.png",
                      "flower bracelet.png",
                      "forager bracelet.png",
                      "leaf bracelet.png",
                      "plant bracelet.png",
                      "shield bracelet.png",
                      "wave bracelet.png"
                    ]
                  },
                  "necklaces": {
                    images: [
                      "asset_1 (15).png",
                      "asset_1 (16).png",
                      "asset_1 (17).png",
                      "asset_1 (18).png",
                      "asset_1 (27).png",
                      "asset_1 (28).png",
                      "asset_1 (29).png",
                      "asset_1 (30).png",
                      "asset_1 (45).png",
                      "asset_1 (46).png",
                      "asset_1 (47).png",
                      "asset_1 (48).png",
                      "asset_1 (53).png",
                      "asset_1 (54).png",
                      "asset_1 (9)-cleaned.png",
                      "asset_2 (15).png",
                      "asset_2 (16).png",
                      "asset_2 (25).png",
                      "asset_2 (26)-cleaned.png",
                      "asset_2 (27).png",
                      "asset_2 (33).png",
                      "asset_2 (39).png",
                      "asset_2 (40).png",
                      "asset_2 (41).png",
                      "asset_2 (42).png",
                      "asset_2 (47).png",
                      "asset_2 (48).png",
                      "asset_3 (12).png",
                      "asset_3 (13).png",
                      "asset_3 (14).png",
                      "asset_3 (22).png",
                      "asset_3 (24).png",
                      "asset_3 (35).png",
                      "asset_3 (36).png",
                      "asset_3 (8)-cleaned.png",
                      "asset_4 (12).png",
                      "asset_5 (21).png",
                      "asset_5 (22).png",
                      "asset_6 (24).png",
                      "asset_6 (25).png",
                      "ruby necklace.png"
                    ]
                  },
                  "pendants": {
                    images: [
                      "1740044240530-removebg-preview.png",
                      "1740044304547-removebg-preview.png",
                      "Amber_Locket.png",
                      "Beryl_Pendant.png",
                      "Diamond_Pendant.png",
                      "Lapiz_Lazuli_Pendant.png",
                      "Opal_Locket.png",
                      "asset_1 (2)-cleaned.png",
                      "asset_1 (3)-cleaned.png"
                    ]
                  }
                }
              }
            }
          },
          "healing items": { images: [] },
          "mining items": { images: [] },
          "outside decor": { images: [] },
          "Plants": {
            images: [
              "Lavendar_sprigs.png",
              "Strawberry plant.png",
              "Wild Flowers.png",
              "asset_1 (3).png",
              "asset_1 (4).png",
              "asset_1 (6).png",
              "asset_2 (1).png",
              "asset_3 (3).png",
              "asset_3 (5).png",
              "asset_4.png",
              "asset_5 (3).png",
              "asset_6 (3).png",
              "asset_6 (5).png",
              "asset_8 (1).png",
              "asset_8 (2).png",
              "daisy plant.png"
            ],
            subfolders: {
              "Crop stages": {
                images: [],
                subfolders: {
                  "broccoli": {
                    images: [
                      "asset_1.png",
                      "asset_2.png",
                      "asset_3.png"
                    ]
                  }
                }
              }
            }
          },
          "possible decor": { images: [] },
          "Regular items": { images: [] },
          "Scrolls": { images: [] },
          "Story items": { images: [] },
          "weapons": {
            images: [],
            subfolders: {
              "axes": {
                images: [
                  "32_by_32_pixel_art_inventory-style_items_with_high_quality__inspired_by_Stardew_Valley_fish.png_2-removebg-preview.png",
                  "War_Cleaver.png",
                  "asset_1 (53)-cleaned.png",
                  "asset_2 (34)-cleaned.png",
                  "asset_3 (41)-cleaned.png",
                  "rotated_image (2).png",
                  "rotated_image (3).png"
                ]
              },
              "bows": {
                images: [
                  "1740102780439-removebg-preview.png",
                  "Fancy_Bow.png",
                  "Philistine_Compact_Bow.png",
                  "Regular_Bow.png",
                  "arrow sheath.png",
                  "asset_1 (49)-cleaned.png",
                  "asset_6 (16)-cleaned.png"
                ]
              },
              "knives": {
                images: [
                  "Ehud's Dagger.png",
                  "Impact_Dagger.png",
                  "Slashing_Dagger.png",
                  "asset_1 (60).png",
                  "asset_1-cleaned.png",
                  "asset_10 (6)-cleaned.png",
                  "asset_2 (42)-cleaned.png",
                  "asset_2 (44)-cleaned.png",
                  "asset_9 (11)-cleaned.png",
                  "rotated_image (2).png",
                  "thiefs karambit.png"
                ]
              },
              "other": {
                images: [
                  "1740102748511-removebg-preview.png",
                  "Spoke.png",
                  "asset_1 (59).png",
                  "asset_1-cleaned (3).png",
                  "asset_2 (27)-cleaned.png",
                  "asset_2 (46)-cleaned.png",
                  "asset_5 (16)-cleaned.png",
                  "asset_7-cleaned (2).png",
                  "training sword.png"
                ]
              },
              "spears": {
                images: [
                  "1740106565216-removebg-preview.png",
                  "1740107155766-removebg-preview.png",
                  "Assyrian_Swinging_Spear.png",
                  "asset_3 (45).png",
                  "asset_3-cleaned.png",
                  "asset_4 (2)-cleaned.png",
                  "asset_4 (40).png",
                  "asset_5 (9).png",
                  "asset_7 (23).png"
                ]
              },
              "Special weapons": {
                images: [
                  "Staff_of_Moses.png",
                  "Sword of the Garden.png"
                ]
              },
              "swords": {
                images: [
                  "1740103017958-removebg-preview.png",
                  "1740106510904-removebg-preview.png",
                  "1740106524125-removebg-preview.png",
                  "1740107054339-removebg-preview.png",
                  "1740107126723-removebg-preview.png",
                  "32_by_32_pixel_art_style_inventory_of_jewels__gems__and_ancient_artifacts.png_16-removebg-preview.png"
                ]
              },
              "throwing blades": {
                images: [
                  "Carving_Blade.png",
                  "Decorative_Throwing_Blade.png",
                  "Hunting_dart.png",
                  "Throwing_Blade.png",
                  "Throwing_Dart.png",
                  "asset_5 (15)-cleaned.png",
                  "asset_7 (12)-cleaned.png",
                  "asset_7 (16)-cleaned.png",
                  "throwing dagger.png"
                ]
              }
            }
          }
        }
      }
    };

    let imageCounter = 1;

    function simplifyImageName(filename) {
      // Count words separated by spaces, underscores, or hyphens
      const words = filename.replace(/\.[^/.]+$/, "") // Remove extension
                            .split(/[\s_-]+/) // Split by spaces, underscores, hyphens
                            .filter(word => word.length > 0);
      
      if (words.length > 4) {
        return `Image ${imageCounter++}`;
      }
      return `Image ${imageCounter++}`;
    }

    function toggleSection(sectionId) {
      const section = document.getElementById(sectionId);
      if (section) {
        if (section.style.display === 'none' || section.style.display === '') {
          section.style.display = 'block';
          section.classList.add('show');
        } else {
          section.style.display = 'none';
          section.classList.remove('show');
        }
      }
    }

    function createImageCard(imagePath, displayName, imageId) {
      return `
        <div class="image-survey-card">
          <div class="image-container">
            <img src="${imagePath}" alt="${displayName}" loading="lazy">
            <div class="image-filename">${displayName}</div>
          </div>
          <div class="survey-controls">
            <div class="checkbox-row">
              <input type="checkbox" id="good_${imageId}" name="rating_${imageId}" value="good">
              <label for="good_${imageId}">Looks good</label>
            </div>
            <div class="checkbox-row">
              <input type="checkbox" id="unsure_${imageId}" name="rating_${imageId}" value="unsure">
              <label for="unsure_${imageId}">I'm not sure</label>
            </div>
            <input type="text" class="text-input name-input" placeholder="Name recommendation (20 chars max)" maxlength="20" name="name_${imageId}" data-image-id="${imageId}">
            <textarea class="text-input description-input" placeholder="Description recommendation (40 words max)" name="description_${imageId}" data-image-id="${imageId}"></textarea>
          </div>
        </div>
      `;
    }

    function generateFolderStructure(data, basePath = '', level = 1) {
      let html = '';
      let globalImageId = 1;

      function processFolder(folderData, currentPath, currentLevel, folderName = '') {
        let folderHtml = '';
        
        if (folderName) {
          const headingTag = `h${Math.min(currentLevel, 6)}`;
          const sectionId = `section_${currentPath.replace(/[^a-zA-Z0-9]/g, '_')}`;
          
          folderHtml += `
            <div class="folder-section">
              <${headingTag} class="folder-header bullet-point" onclick="toggleSection('${sectionId}')">${folderName}</${headingTag}>
              <div id="${sectionId}" class="collapsible-content">
          `;
        }

        // Process images in current folder
        if (folderData.images && folderData.images.length > 0) {
          folderHtml += '<div class="images-grid">';
          folderData.images.forEach(imageName => {
            const imagePath = currentPath ? `${currentPath}/${imageName}` : imageName;
            const displayName = simplifyImageName(imageName);
            folderHtml += createImageCard(imagePath, displayName, globalImageId++);
          });
          folderHtml += '</div>';
        }

        // Process subfolders
        if (folderData.subfolders) {
          Object.entries(folderData.subfolders).forEach(([subfolderName, subfolderData]) => {
            const subfolderPath = currentPath ? `${currentPath}/${subfolderName}` : subfolderName;
            folderHtml += processFolder(subfolderData, subfolderPath, currentLevel + 1, subfolderName);
          });
        }

        if (folderName) {
          folderHtml += `
              </div>
            </div>
          `;
        }

        return folderHtml;
      }

      // Start processing from root
      Object.entries(data).forEach(([rootFolderName, rootFolderData]) => {
        html += processFolder(rootFolderData, rootFolderName, level, rootFolderName);
      });

      return html;
    }

    function countWords(text) {
      return text.trim().split(/\s+/).filter(word => word.length > 0).length;
    }

    function validateDescriptions() {
      const descriptions = document.querySelectorAll('.description-input');
      descriptions.forEach(textarea => {
        textarea.addEventListener('input', function() {
          const wordCount = countWords(this.value);
          if (wordCount > 40) {
            const words = this.value.trim().split(/\s+/);
            this.value = words.slice(0, 40).join(' ');
          }
        });
      });
    }

    function setupCheckboxExclusivity() {
      const checkboxPairs = document.querySelectorAll('.image-survey-card');
      checkboxPairs.forEach(card => {
        const goodCheckbox = card.querySelector('input[value="good"]');
        const unsureCheckbox = card.querySelector('input[value="unsure"]');
        
        if (goodCheckbox && unsureCheckbox) {
          goodCheckbox.addEventListener('change', function() {
            if (this.checked) {
              unsureCheckbox.checked = false;
            }
          });
          
          unsureCheckbox.addEventListener('change', function() {
            if (this.checked) {
              goodCheckbox.checked = false;
            }
          });
        }
      });
    }

    function collectSurveyData() {
      const data = [];
      const cards = document.querySelectorAll('.image-survey-card');
      
      cards.forEach((card, index) => {
        const img = card.querySelector('img');
        const filename = img.src.split('/').pop();
        const displayName = card.querySelector('.image-filename').textContent;
        
        const goodChecked = card.querySelector('input[value="good"]')?.checked || false;
        const unsureChecked = card.querySelector('input[value="unsure"]')?.checked || false;
        const nameRecommendation = card.querySelector('.name-input')?.value || '';
        const descriptionRecommendation = card.querySelector('.description-input')?.value || '';
        
        let rating = 'no_rating';
        if (goodChecked) rating = 'good';
        else if (unsureChecked) rating = 'not_sure';
        
        data.push({
          originalFilename: filename,
          displayName: displayName,
          rating: rating,
          nameRecommendation: nameRecommendation,
          descriptionRecommendation: descriptionRecommendation
        });
      });
      
      return data;
    }

    function submitSurvey() {
      const surveyData = collectSurveyData();
      
      // Filter to only include items with actual data
      const changedItems = surveyData.filter(item => 
        item.rating !== 'no_rating' || 
        item.nameRecommendation || 
        item.descriptionRecommendation
      );
      
      if (changedItems.length === 0) {
        alert('Please provide at least one rating or recommendation before submitting.');
        return;
      }
      
      // Create text content for email - only changed items
      let emailContent = "Game Pixel Art Survey Results\n\n";
      emailContent += `Submitted: ${new Date().toLocaleString()}\n`;
      emailContent += `Items with feedback: ${changedItems.length}\n\n`;
      
      changedItems.forEach((item, index) => {
        emailContent += `${item.displayName}:\n`;
        emailContent += `Original Filename: ${item.originalFilename}\n`;
        if (item.rating !== 'no_rating') {
          emailContent += `Rating: ${item.rating}\n`;
        }
        if (item.nameRecommendation) {
          emailContent += `Name Recommendation: ${item.nameRecommendation}\n`;
        }
        if (item.descriptionRecommendation) {
          emailContent += `Description Recommendation: ${item.descriptionRecommendation}\n`;
        }
        emailContent += '\n---\n\n';
      });
      
      // Create and send email directly
      const subject = encodeURIComponent('Game Pixel Art Survey Results');
      const body = encodeURIComponent(emailContent);
      const mailtoLink = `mailto:jopotapka@gmail.com?subject=${subject}&body=${body}`;
      
      // Store data for recovery in case email fails - only changed items
      localStorage.setItem('latestSurveyData', JSON.stringify({
        timestamp: new Date().toISOString(),
        data: changedItems,
        emailContent: emailContent
      }));
      
      // Try to open email client
      try {
        window.location.href = mailtoLink;
        alert('Email client opened with survey results. Please send the email to complete submission.');
      } catch (error) {
        // Fallback: copy to clipboard if possible
        if (navigator.clipboard) {
          navigator.clipboard.writeText(emailContent).then(() => {
            alert(`Email client failed to open. Survey results copied to clipboard.\n\nPlease paste into an email and send to: jopotapka@gmail.com`);
          }).catch(() => {
            showManualEmailInstructions(emailContent);
          });
        } else {
          showManualEmailInstructions(emailContent);
        }
      }
    }
    
    function showManualEmailInstructions(emailContent) {
      // Create a modal-like alert with the email content
      const modal = document.createElement('div');
      modal.style.cssText = `
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0,0,0,0.8);
        z-index: 10000;
        display: flex;
        align-items: center;
        justify-content: center;
      `;
      
      const content = document.createElement('div');
      content.style.cssText = `
        background: #222;
        color: white;
        padding: 2rem;
        border-radius: 10px;
        max-width: 80%;
        max-height: 80%;
        overflow-y: auto;
        font-family: Calibri;
      `;
      
      content.innerHTML = `
        <h3>Please Email This Survey Data</h3>
        <p><strong>To:</strong> jopotapka@gmail.com</p>
        <p><strong>Subject:</strong> Game Pixel Art Survey Results</p>
        <textarea readonly style="width: 100%; height: 300px; background: #333; color: white; border: 1px solid #555; padding: 10px; border-radius: 5px;">${emailContent}</textarea>
        <br><br>
        <button onclick="this.parentElement.parentElement.remove()" style="background: #007bff; color: white; border: none; padding: 10px 20px; border-radius: 5px; cursor: pointer;">Close</button>
      `;
      
      modal.appendChild(content);
      document.body.appendChild(modal);
    }
    
    // Auto-submit on page unload
    window.addEventListener('beforeunload', function(e) {
      const surveyData = collectSurveyData();
      const changedItems = surveyData.filter(item => 
        item.rating !== 'no_rating' || 
        item.nameRecommendation || 
        item.descriptionRecommendation
      );
      
      if (changedItems.length > 0) {
        // Store data in localStorage for auto-recovery - only changed items
        const autoSaveData = {
          timestamp: new Date().toISOString(),
          data: changedItems,
          type: 'auto-submit'
        };
        localStorage.setItem('autoSurveyData', JSON.stringify(autoSaveData));
      }
    });

    // Check for auto-saved data on page load and offer to recover/send
    function checkForAutoSavedData() {
      const autoSaved = localStorage.getItem('autoSurveyData');
      if (autoSaved) {
        try {
          const data = JSON.parse(autoSaved);
          const timeDiff = Date.now() - new Date(data.timestamp).getTime();
          const hoursDiff = timeDiff / (1000 * 60 * 60);
          
          if (hoursDiff < 24) { // Only offer recovery for data less than 24 hours old
            if (confirm(`Found unsent survey data from ${new Date(data.timestamp).toLocaleString()}.\n\nWould you like to send it now?`)) {
              // Format and send the recovered data
              let emailContent = "Game Pixel Art Survey Results (Auto-recovered)\n\n";
              emailContent += `Original Submission Time: ${data.timestamp}\n`;
              emailContent += `Recovered: ${new Date().toLocaleString()}\n`;
              emailContent += `Items with feedback: ${data.data.length}\n\n`;
              
              data.data.forEach((item, index) => {
                emailContent += `${item.displayName}:\n`;
                emailContent += `Original Filename: ${item.originalFilename}\n`;
                if (item.rating !== 'no_rating') {
                  emailContent += `Rating: ${item.rating}\n`;
                }
                if (item.nameRecommendation) {
                  emailContent += `Name Recommendation: ${item.nameRecommendation}\n`;
                }
                if (item.descriptionRecommendation) {
                  emailContent += `Description Recommendation: ${item.descriptionRecommendation}\n`;
                }
                emailContent += '\n---\n\n';
              });
              
              // Send recovered data via email
              const subject = encodeURIComponent('Game Pixel Art Survey Results (Recovered)');
              const body = encodeURIComponent(emailContent);
              const mailtoLink = `mailto:jopotapka@gmail.com?subject=${subject}&body=${body}`;
              
              try {
                window.location.href = mailtoLink;
                alert('Email client opened with recovered survey results. Please send the email.');
                localStorage.removeItem('autoSurveyData'); // Clear after sending
              } catch (error) {
                alert('Could not open email client. Please check your email settings.');
              }
            }
          } else {
            // Remove old data
            localStorage.removeItem('autoSurveyData');
          }
        } catch (error) {
          console.error('Error parsing auto-saved data:', error);
          localStorage.removeItem('autoSurveyData');
        }
      }
    }

    // Initialize the survey when page loads
    document.addEventListener('DOMContentLoaded', function() {
      // Check for auto-saved data first
      checkForAutoSavedData();
      
      // Generate the folder structure
      const surveyContent = document.getElementById('survey-content');
      surveyContent.innerHTML = generateFolderStructure(imageDatabase);
      
      // Setup form validation and interactions
      validateDescriptions();
      setupCheckboxExclusivity();
      
      // Show root level by default
      const rootSections = document.querySelectorAll('[id^="section_Game_pixel_art"]');
      rootSections.forEach(section => {
        if (section.id === 'section_Game_pixel_art') {
          section.style.display = 'block';
          section.classList.add('show');
        }
      });
    });
  </script>
</body>
</html>
